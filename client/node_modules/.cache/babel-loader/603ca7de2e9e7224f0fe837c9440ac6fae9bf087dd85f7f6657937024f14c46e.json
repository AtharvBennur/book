{"ast":null,"code":"const API_BASE = '';\nconst buildUrl = path => {\n  if (!path) return API_BASE || '';\n  if (path.startsWith('http')) return path;\n  return `${API_BASE}${path}`;\n};\nconst isFormData = payload => typeof FormData !== 'undefined' && payload instanceof FormData;\nexport async function request(path, options = {}) {\n  const {\n    method = 'GET',\n    body,\n    token,\n    headers = {},\n    ...rest\n  } = options;\n  const resolvedHeaders = {\n    Accept: 'application/json',\n    ...(!isFormData(body) && body ? {\n      'Content-Type': 'application/json'\n    } : {}),\n    ...headers\n  };\n  if (token) {\n    resolvedHeaders.Authorization = `Bearer ${token}`;\n  }\n  const response = await fetch(buildUrl(path), {\n    method,\n    body: body && !isFormData(body) ? JSON.stringify(body) : body,\n    headers: resolvedHeaders,\n    ...rest\n  });\n  const text = await response.text();\n  let data = null;\n  if (text) {\n    try {\n      data = JSON.parse(text);\n    } catch (err) {\n      data = text;\n    }\n  }\n  if (!response.ok) {\n    var _data;\n    const error = new Error(((_data = data) === null || _data === void 0 ? void 0 : _data.error) || 'Request failed');\n    error.status = response.status;\n    error.data = data;\n    throw error;\n  }\n  return data;\n}\nexport const authApi = {\n  me: token => request('/api/me', {\n    token\n  }),\n  login: credentials => request('/api/login', {\n    method: 'POST',\n    body: credentials\n  }),\n  signup: payload => request('/api/signup', {\n    method: 'POST',\n    body: payload\n  }),\n  updateProfile: (userId, payload, token) => request(`/api/users/${userId}`, {\n    method: 'PUT',\n    body: payload,\n    token\n  })\n};\nexport const booksApi = {\n  list: () => request('/api/books'),\n  create: (payload, token) => request('/api/books', {\n    method: 'POST',\n    body: payload,\n    token\n  }),\n  update: (bookId, payload, token) => request(`/api/books/${bookId}`, {\n    method: 'PUT',\n    body: payload,\n    token\n  }),\n  remove: (bookId, token) => request(`/api/books/${bookId}`, {\n    method: 'DELETE',\n    token\n  })\n};\nexport const favoritesApi = {\n  list: token => request('/api/users/favorites', {\n    token\n  }),\n  toggle: (bookId, token) => request('/api/users/favorite', {\n    method: 'POST',\n    body: {\n      bookId\n    },\n    token\n  })\n};\nexport const exchangesApi = {\n  list: token => request('/api/exchanges', {\n    token\n  }),\n  create: (payload, token) => request('/api/exchanges', {\n    method: 'POST',\n    body: payload,\n    token\n  }),\n  accept: (exchangeId, token) => request(`/api/exchanges/${exchangeId}/accept`, {\n    method: 'PUT',\n    token\n  }),\n  decline: (exchangeId, token) => request(`/api/exchanges/${exchangeId}/decline`, {\n    method: 'PUT',\n    token\n  })\n};\nexport const conversationsApi = {\n  list: token => request('/api/conversations', {\n    token\n  }),\n  create: (payload, token) => request('/api/conversations', {\n    method: 'POST',\n    body: payload,\n    token\n  }),\n  messages: (conversationId, token) => request(`/api/conversations/${conversationId}/messages`, {\n    token\n  }),\n  sendMessage: (conversationId, payload, token) => request(`/api/conversations/${conversationId}/messages`, {\n    method: 'POST',\n    body: payload,\n    token\n  }),\n  markRead: (conversationId, token) => request(`/api/conversations/${conversationId}/read`, {\n    method: 'PUT',\n    token\n  })\n};\nexport const aiApi = {\n  ask: (question, token) => request('/api/ai-help', {\n    method: 'POST',\n    body: {\n      question\n    },\n    token\n  })\n};","map":{"version":3,"names":["API_BASE","buildUrl","path","startsWith","isFormData","payload","FormData","request","options","method","body","token","headers","rest","resolvedHeaders","Accept","Authorization","response","fetch","JSON","stringify","text","data","parse","err","ok","_data","error","Error","status","authApi","me","login","credentials","signup","updateProfile","userId","booksApi","list","create","update","bookId","remove","favoritesApi","toggle","exchangesApi","accept","exchangeId","decline","conversationsApi","messages","conversationId","sendMessage","markRead","aiApi","ask","question"],"sources":["C:/Users/dell/Desktop/pro/book-exchange-app/client/src/services/api.js"],"sourcesContent":["const API_BASE = '';\r\n\r\nconst buildUrl = (path) => {\r\n  if (!path) return API_BASE || '';\r\n  if (path.startsWith('http')) return path;\r\n  return `${API_BASE}${path}`;\r\n};\r\n\r\nconst isFormData = (payload) => typeof FormData !== 'undefined' && payload instanceof FormData;\r\n\r\nexport async function request(path, options = {}) {\r\n  const { method = 'GET', body, token, headers = {}, ...rest } = options;\r\n  const resolvedHeaders = {\r\n    Accept: 'application/json',\r\n    ...(!isFormData(body) && body ? { 'Content-Type': 'application/json' } : {}),\r\n    ...headers,\r\n  };\r\n\r\n  if (token) {\r\n    resolvedHeaders.Authorization = `Bearer ${token}`;\r\n  }\r\n\r\n  const response = await fetch(buildUrl(path), {\r\n    method,\r\n    body: body && !isFormData(body) ? JSON.stringify(body) : body,\r\n    headers: resolvedHeaders,\r\n    ...rest,\r\n  });\r\n\r\n  const text = await response.text();\r\n  let data = null;\r\n  if (text) {\r\n    try {\r\n      data = JSON.parse(text);\r\n    } catch (err) {\r\n      data = text;\r\n    }\r\n  }\r\n\r\n  if (!response.ok) {\r\n    const error = new Error(data?.error || 'Request failed');\r\n    error.status = response.status;\r\n    error.data = data;\r\n    throw error;\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport const authApi = {\r\n  me: (token) => request('/api/me', { token }),\r\n  login: (credentials) => request('/api/login', { method: 'POST', body: credentials }),\r\n  signup: (payload) => request('/api/signup', { method: 'POST', body: payload }),\r\n  updateProfile: (userId, payload, token) =>\r\n    request(`/api/users/${userId}`, { method: 'PUT', body: payload, token }),\r\n};\r\n\r\nexport const booksApi = {\r\n  list: () => request('/api/books'),\r\n  create: (payload, token) => request('/api/books', { method: 'POST', body: payload, token }),\r\n  update: (bookId, payload, token) =>\r\n    request(`/api/books/${bookId}`, { method: 'PUT', body: payload, token }),\r\n  remove: (bookId, token) =>\r\n    request(`/api/books/${bookId}`, { method: 'DELETE', token }),\r\n};\r\n\r\nexport const favoritesApi = {\r\n  list: (token) => request('/api/users/favorites', { token }),\r\n  toggle: (bookId, token) =>\r\n    request('/api/users/favorite', {\r\n      method: 'POST',\r\n      body: { bookId },\r\n      token,\r\n    }),\r\n};\r\n\r\nexport const exchangesApi = {\r\n  list: (token) => request('/api/exchanges', { token }),\r\n  create: (payload, token) =>\r\n    request('/api/exchanges', { method: 'POST', body: payload, token }),\r\n  accept: (exchangeId, token) =>\r\n    request(`/api/exchanges/${exchangeId}/accept`, { method: 'PUT', token }),\r\n  decline: (exchangeId, token) =>\r\n    request(`/api/exchanges/${exchangeId}/decline`, { method: 'PUT', token }),\r\n};\r\n\r\nexport const conversationsApi = {\r\n  list: (token) => request('/api/conversations', { token }),\r\n  create: (payload, token) =>\r\n    request('/api/conversations', { method: 'POST', body: payload, token }),\r\n  messages: (conversationId, token) =>\r\n    request(`/api/conversations/${conversationId}/messages`, { token }),\r\n  sendMessage: (conversationId, payload, token) =>\r\n    request(`/api/conversations/${conversationId}/messages`, {\r\n      method: 'POST',\r\n      body: payload,\r\n      token,\r\n    }),\r\n  markRead: (conversationId, token) =>\r\n    request(`/api/conversations/${conversationId}/read`, { method: 'PUT', token }),\r\n};\r\n\r\nexport const aiApi = {\r\n  ask: (question, token) =>\r\n    request('/api/ai-help', {\r\n      method: 'POST',\r\n      body: { question },\r\n      token,\r\n    }),\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}