{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dell\\\\Desktop\\\\pro\\\\book-exchange-app\\\\client\\\\src\\\\pages\\\\Favorites.jsx\",\n  _s = $RefreshSig$();\nimport { useNavigate } from 'react-router-dom';\nimport { Heart } from 'lucide-react';\nimport BookGrid from '../components/books/BookGrid';\nimport SectionHeading from '../components/common/SectionHeading';\nimport EmptyState from '../components/common/EmptyState';\nimport { useAppData } from '../context/AppDataContext';\nimport { useAuth } from '../context/AuthContext';\nimport { exchangesApi, conversationsApi } from '../services/api';\nimport { useNotification } from '../context/NotificationContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Favorites = () => {\n  _s();\n  const {\n    books,\n    favorites,\n    toggleFavorite,\n    isOwner,\n    refreshBooks,\n    refreshExchanges,\n    exchanges\n  } = useAppData();\n  const {\n    token,\n    user\n  } = useAuth();\n  const {\n    notify\n  } = useNotification();\n  const navigate = useNavigate();\n  const favoriteBooks = books.filter(book => favorites.includes(book.id));\n  if (!favorites.length) {\n    return /*#__PURE__*/_jsxDEV(EmptyState, {\n      title: \"No favorites yet\",\n      description: \"Tap the heart on any book to keep it in your shortlist.\",\n      icon: /*#__PURE__*/_jsxDEV(Heart, {\n        className: \"h-10 w-10\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 15\n      }, this),\n      action: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/browse'),\n        className: \"rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-slate-600\",\n        children: \"Browse books\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }, this);\n  }\n  const handleRequest = async book => {\n    try {\n      await exchangesApi.create({\n        bookId: book.id,\n        message: `Checking in about ${book.title}`\n      }, token);\n      notify('Exchange request sent.', 'success');\n      refreshBooks();\n      refreshExchanges();\n    } catch (err) {\n      notify(err.message || 'Unable to request exchange.', 'error');\n    }\n  };\n  const canChatOnBook = book => {\n    if (!user) return false;\n    return exchanges.some(exchange => exchange.bookId === book.id && [exchange.ownerId, exchange.requesterId].includes(user.id) && [exchange.ownerId, exchange.requesterId].includes(book.ownerId));\n  };\n  const handleChat = async book => {\n    if (!canChatOnBook(book)) {\n      notify('Send or accept an exchange request before chatting with the owner.', 'info');\n      return;\n    }\n    try {\n      const conversation = await conversationsApi.create({\n        otherUserId: book.ownerId,\n        bookId: book.id\n      }, token);\n      navigate('/chat', {\n        state: {\n          conversationId: conversation.id\n        }\n      });\n    } catch (err) {\n      notify(err.message || 'Unable to open chat.', 'error');\n    }\n  };\n  const shareFavorites = async () => {\n    try {\n      const summary = favoriteBooks.map((book, idx) => `${idx + 1}. ${book.title} by ${book.author}`).join('\\n');\n      await navigator.clipboard.writeText(`My BookLoop wishlist:\\n${summary || 'No favorites yet.'}`);\n      notify('Wishlist copied to clipboard!', 'success');\n    } catch (error) {\n      notify('Unable to copy wishlist right now.', 'error');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(SectionHeading, {\n      eyebrow: \"Saved list\",\n      title: \"Books you\\u2019re tracking\",\n      description: \"You\\u2019ll get notified when statuses change or owners reply.\",\n      align: \"left\",\n      actions: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: shareFavorites,\n        className: \"rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-slate-600 hover:border-slate-300\",\n        children: \"Share wishlist\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BookGrid, {\n      books: favoriteBooks,\n      favorites: favorites,\n      onToggleFavorite: toggleFavorite,\n      onRequestExchange: handleRequest,\n      onChat: handleChat,\n      isOwner: isOwner\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n_s(Favorites, \"nvd59c/Xlqls7QvxDQvnxdWTxOc=\", false, function () {\n  return [useAppData, useAuth, useNotification, useNavigate];\n});\n_c = Favorites;\nexport default Favorites;\nvar _c;\n$RefreshReg$(_c, \"Favorites\");","map":{"version":3,"names":["useNavigate","Heart","BookGrid","SectionHeading","EmptyState","useAppData","useAuth","exchangesApi","conversationsApi","useNotification","jsxDEV","_jsxDEV","Favorites","_s","books","favorites","toggleFavorite","isOwner","refreshBooks","refreshExchanges","exchanges","token","user","notify","navigate","favoriteBooks","filter","book","includes","id","length","title","description","icon","className","fileName","_jsxFileName","lineNumber","columnNumber","action","onClick","children","handleRequest","create","bookId","message","err","canChatOnBook","some","exchange","ownerId","requesterId","handleChat","conversation","otherUserId","state","conversationId","shareFavorites","summary","map","idx","author","join","navigator","clipboard","writeText","error","eyebrow","align","actions","onToggleFavorite","onRequestExchange","onChat","_c","$RefreshReg$"],"sources":["C:/Users/dell/Desktop/pro/book-exchange-app/client/src/pages/Favorites.jsx"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\r\nimport { Heart } from 'lucide-react';\r\nimport BookGrid from '../components/books/BookGrid';\r\nimport SectionHeading from '../components/common/SectionHeading';\r\nimport EmptyState from '../components/common/EmptyState';\r\nimport { useAppData } from '../context/AppDataContext';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { exchangesApi, conversationsApi } from '../services/api';\r\nimport { useNotification } from '../context/NotificationContext';\r\n\r\nconst Favorites = () => {\r\n  const { books, favorites, toggleFavorite, isOwner, refreshBooks, refreshExchanges, exchanges } =\r\n    useAppData();\r\n  const { token, user } = useAuth();\r\n  const { notify } = useNotification();\r\n  const navigate = useNavigate();\r\n  const favoriteBooks = books.filter((book) => favorites.includes(book.id));\r\n\r\n  if (!favorites.length) {\r\n    return (\r\n      <EmptyState\r\n        title=\"No favorites yet\"\r\n        description=\"Tap the heart on any book to keep it in your shortlist.\"\r\n        icon={<Heart className=\"h-10 w-10\" />}\r\n        action={\r\n          <button\r\n            onClick={() => navigate('/browse')}\r\n            className=\"rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-slate-600\"\r\n          >\r\n            Browse books\r\n          </button>\r\n        }\r\n      />\r\n    );\r\n  }\r\n\r\n  const handleRequest = async (book) => {\r\n    try {\r\n      await exchangesApi.create(\r\n        { bookId: book.id, message: `Checking in about ${book.title}` },\r\n        token\r\n      );\r\n      notify('Exchange request sent.', 'success');\r\n      refreshBooks();\r\n      refreshExchanges();\r\n    } catch (err) {\r\n      notify(err.message || 'Unable to request exchange.', 'error');\r\n    }\r\n  };\r\n\r\n  const canChatOnBook = (book) => {\r\n    if (!user) return false;\r\n    return exchanges.some(\r\n      (exchange) =>\r\n        exchange.bookId === book.id &&\r\n        [exchange.ownerId, exchange.requesterId].includes(user.id) &&\r\n        [exchange.ownerId, exchange.requesterId].includes(book.ownerId)\r\n    );\r\n  };\r\n\r\n  const handleChat = async (book) => {\r\n    if (!canChatOnBook(book)) {\r\n      notify('Send or accept an exchange request before chatting with the owner.', 'info');\r\n      return;\r\n    }\r\n    try {\r\n      const conversation = await conversationsApi.create(\r\n        { otherUserId: book.ownerId, bookId: book.id },\r\n        token\r\n      );\r\n      navigate('/chat', { state: { conversationId: conversation.id } });\r\n    } catch (err) {\r\n      notify(err.message || 'Unable to open chat.', 'error');\r\n    }\r\n  };\r\n\r\n  const shareFavorites = async () => {\r\n    try {\r\n      const summary = favoriteBooks\r\n        .map((book, idx) => `${idx + 1}. ${book.title} by ${book.author}`)\r\n        .join('\\n');\r\n      await navigator.clipboard.writeText(\r\n        `My BookLoop wishlist:\\n${summary || 'No favorites yet.'}`\r\n      );\r\n      notify('Wishlist copied to clipboard!', 'success');\r\n    } catch (error) {\r\n      notify('Unable to copy wishlist right now.', 'error');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SectionHeading\r\n        eyebrow=\"Saved list\"\r\n        title=\"Books you’re tracking\"\r\n        description=\"You’ll get notified when statuses change or owners reply.\"\r\n        align=\"left\"\r\n        actions={\r\n          <button\r\n            onClick={shareFavorites}\r\n            className=\"rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-slate-600 hover:border-slate-300\"\r\n          >\r\n            Share wishlist\r\n          </button>\r\n        }\r\n      />\r\n      <BookGrid\r\n        books={favoriteBooks}\r\n        favorites={favorites}\r\n        onToggleFavorite={toggleFavorite}\r\n        onRequestExchange={handleRequest}\r\n        onChat={handleChat}\r\n        isOwner={isOwner}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Favorites;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}