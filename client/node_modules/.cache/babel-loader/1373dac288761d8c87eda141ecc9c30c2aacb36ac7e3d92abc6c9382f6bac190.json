{"ast":null,"code":"import _objectSpread from\"C:/Users/dell/Desktop/pro/book-exchange-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from'react';import{PlusCircle}from'lucide-react';import SectionHeading from'../components/common/SectionHeading';import{booksApi}from'../services/api';import{useAuth}from'../context/AuthContext';import{useAppData}from'../context/AppDataContext';import{useNotification}from'../context/NotificationContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const initialState={title:'',author:'',genre:'Fiction',condition:'Good',location:'',imageUrl:''};const AddBook=()=>{const[form,setForm]=useState(initialState);const[isSubmitting,setIsSubmitting]=useState(false);const{token,user}=useAuth();const{refreshBooks}=useAppData();const{notify}=useNotification();const update=(field,value)=>setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));const handleSubmit=async event=>{event.preventDefault();if(!token)return;setIsSubmitting(true);try{await booksApi.create(_objectSpread(_objectSpread({},form),{},{ownerId:user===null||user===void 0?void 0:user.id}),token);notify('Book published!','success');setForm(initialState);refreshBooks();}catch(err){notify(err.message||'Unable to add book.','error');}finally{setIsSubmitting(false);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(SectionHeading,{eyebrow:\"New Listing\",title:\"Share a book with the community\",description:\"Listings go live instantly and can be edited anytime.\",align:\"left\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-6 md:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"text-sm text-slate-700\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Book title\"}),/*#__PURE__*/_jsx(\"input\",{required:true,value:form.title,onChange:event=>update('title',event.target.value),className:\"mt-2 w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"text-sm text-slate-700\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Author\"}),/*#__PURE__*/_jsx(\"input\",{required:true,value:form.author,onChange:event=>update('author',event.target.value),className:\"mt-2 w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"text-sm text-slate-700\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Genre\"}),/*#__PURE__*/_jsxs(\"select\",{value:form.genre,onChange:event=>update('genre',event.target.value),className:\"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Fiction\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Non-Fiction\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Sci-Fi\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Biography\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Mystery\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Textbook\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"text-sm text-slate-700\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Condition\"}),/*#__PURE__*/_jsxs(\"select\",{value:form.condition,onChange:event=>update('condition',event.target.value),className:\"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"New\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Like New\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Good\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Fair\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Poor\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"text-sm text-slate-700\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"City / Location\"}),/*#__PURE__*/_jsx(\"input\",{required:true,value:form.location,onChange:event=>update('location',event.target.value),className:\"mt-2 w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"text-sm text-slate-700\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Cover image URL\"}),/*#__PURE__*/_jsx(\"input\",{value:form.imageUrl,onChange:event=>update('imageUrl',event.target.value),className:\"mt-2 w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\",placeholder:\"https://\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:isSubmitting,className:\"mt-8 flex w-full items-center justify-center gap-2 rounded-full bg-gradient-to-r from-emerald-500 to-teal-400 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 disabled:cursor-not-allowed disabled:opacity-60\",children:[/*#__PURE__*/_jsx(PlusCircle,{className:\"h-4 w-4\"}),\"Publish listing\"]})]})]});};export default AddBook;","map":{"version":3,"names":["useState","PlusCircle","SectionHeading","booksApi","useAuth","useAppData","useNotification","jsx","_jsx","jsxs","_jsxs","initialState","title","author","genre","condition","location","imageUrl","AddBook","form","setForm","isSubmitting","setIsSubmitting","token","user","refreshBooks","notify","update","field","value","prev","_objectSpread","handleSubmit","event","preventDefault","create","ownerId","id","err","message","children","eyebrow","description","align","onSubmit","className","required","onChange","target","placeholder","type","disabled"],"sources":["C:/Users/dell/Desktop/pro/book-exchange-app/client/src/pages/AddBook.jsx"],"sourcesContent":["import { useState } from 'react';\r\nimport { PlusCircle } from 'lucide-react';\r\nimport SectionHeading from '../components/common/SectionHeading';\r\nimport { booksApi } from '../services/api';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useAppData } from '../context/AppDataContext';\r\nimport { useNotification } from '../context/NotificationContext';\r\n\r\nconst initialState = {\r\n  title: '',\r\n  author: '',\r\n  genre: 'Fiction',\r\n  condition: 'Good',\r\n  location: '',\r\n  imageUrl: '',\r\n};\r\n\r\nconst AddBook = () => {\r\n  const [form, setForm] = useState(initialState);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const { token, user } = useAuth();\r\n  const { refreshBooks } = useAppData();\r\n  const { notify } = useNotification();\r\n\r\n  const update = (field, value) => setForm((prev) => ({ ...prev, [field]: value }));\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (!token) return;\r\n    setIsSubmitting(true);\r\n    try {\r\n      await booksApi.create({ ...form, ownerId: user?.id }, token);\r\n      notify('Book published!', 'success');\r\n      setForm(initialState);\r\n      refreshBooks();\r\n    } catch (err) {\r\n      notify(err.message || 'Unable to add book.', 'error');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SectionHeading\r\n        eyebrow=\"New Listing\"\r\n        title=\"Share a book with the community\"\r\n        description=\"Listings go live instantly and can be edited anytime.\"\r\n        align=\"left\"\r\n      />\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-100\"\r\n      >\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          <label className=\"text-sm text-slate-700\">\r\n            <span>Book title</span>\r\n            <input\r\n              required\r\n              value={form.title}\r\n              onChange={(event) => update('title', event.target.value)}\r\n              className=\"mt-2 w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\"\r\n            />\r\n          </label>\r\n          <label className=\"text-sm text-slate-700\">\r\n            <span>Author</span>\r\n            <input\r\n              required\r\n              value={form.author}\r\n              onChange={(event) => update('author', event.target.value)}\r\n              className=\"mt-2 w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\"\r\n            />\r\n          </label>\r\n          <label className=\"text-sm text-slate-700\">\r\n            <span>Genre</span>\r\n            <select\r\n              value={form.genre}\r\n              onChange={(event) => update('genre', event.target.value)}\r\n              className=\"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\"\r\n            >\r\n              <option>Fiction</option>\r\n              <option>Non-Fiction</option>\r\n              <option>Sci-Fi</option>\r\n              <option>Biography</option>\r\n              <option>Mystery</option>\r\n              <option>Textbook</option>\r\n            </select>\r\n          </label>\r\n          <label className=\"text-sm text-slate-700\">\r\n            <span>Condition</span>\r\n            <select\r\n              value={form.condition}\r\n              onChange={(event) => update('condition', event.target.value)}\r\n              className=\"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\"\r\n            >\r\n              <option>New</option>\r\n              <option>Like New</option>\r\n              <option>Good</option>\r\n              <option>Fair</option>\r\n              <option>Poor</option>\r\n            </select>\r\n          </label>\r\n          <label className=\"text-sm text-slate-700\">\r\n            <span>City / Location</span>\r\n            <input\r\n              required\r\n              value={form.location}\r\n              onChange={(event) => update('location', event.target.value)}\r\n              className=\"mt-2 w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\"\r\n            />\r\n          </label>\r\n          <label className=\"text-sm text-slate-700\">\r\n            <span>Cover image URL</span>\r\n            <input\r\n              value={form.imageUrl}\r\n              onChange={(event) => update('imageUrl', event.target.value)}\r\n              className=\"mt-2 w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 outline-none focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\"\r\n              placeholder=\"https://\"\r\n            />\r\n          </label>\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isSubmitting}\r\n          className=\"mt-8 flex w-full items-center justify-center gap-2 rounded-full bg-gradient-to-r from-emerald-500 to-teal-400 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-emerald-500/30 disabled:cursor-not-allowed disabled:opacity-60\"\r\n        >\r\n          <PlusCircle className=\"h-4 w-4\" />\r\n          Publish listing\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddBook;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}