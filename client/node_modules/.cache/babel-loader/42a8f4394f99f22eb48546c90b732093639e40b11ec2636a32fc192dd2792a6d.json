{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dell\\\\Desktop\\\\pro\\\\book-exchange-app\\\\client\\\\src\\\\pages\\\\Browse.jsx\",\n  _s = $RefreshSig$();\nimport { useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BookFilters from '../components/books/BookFilters';\nimport BookGrid from '../components/books/BookGrid';\nimport SectionHeading from '../components/common/SectionHeading';\nimport { useAppData } from '../context/AppDataContext';\nimport { useAuth } from '../context/AuthContext';\nimport { exchangesApi, conversationsApi } from '../services/api';\nimport { useNotification } from '../context/NotificationContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Browse = () => {\n  _s();\n  const {\n    books,\n    booksStatus,\n    favorites,\n    toggleFavorite,\n    refreshBooks,\n    refreshExchanges,\n    isOwner\n  } = useAppData();\n  const {\n    isAuthenticated,\n    token\n  } = useAuth();\n  const {\n    notify\n  } = useNotification();\n  const navigate = useNavigate();\n  const [filters, setFilters] = useState({\n    search: '',\n    genre: 'All Genres',\n    status: 'Any Status'\n  });\n  const filteredBooks = useMemo(() => {\n    return books.filter(book => {\n      const matchesSearch = !filters.search || book.title.toLowerCase().includes(filters.search.toLowerCase()) || book.author.toLowerCase().includes(filters.search.toLowerCase());\n      const matchesGenre = filters.genre === 'All Genres' || book.genre === filters.genre;\n      const matchesStatus = filters.status === 'Any Status' || book.status === filters.status;\n      return matchesSearch && matchesGenre && matchesStatus;\n    });\n  }, [books, filters]);\n  const requireAuth = () => {\n    if (!isAuthenticated) {\n      notify('Please sign in to continue.', 'info');\n      navigate('/auth/signin', {\n        replace: true,\n        state: {\n          from: '/browse'\n        }\n      });\n      return false;\n    }\n    return true;\n  };\n  const handleRequest = async book => {\n    if (!requireAuth()) return;\n    try {\n      await exchangesApi.create({\n        bookId: book.id,\n        message: `I'd love to exchange for ${book.title}`\n      }, token);\n      notify('Exchange request sent.', 'success');\n      refreshBooks();\n      refreshExchanges();\n    } catch (err) {\n      notify(err.message || 'Unable to create request.', 'error');\n    }\n  };\n  const handleChat = async book => {\n    if (!requireAuth()) return;\n    try {\n      const conversation = await conversationsApi.create({\n        otherUserId: book.ownerId,\n        bookId: book.id\n      }, token);\n      navigate('/chat', {\n        state: {\n          conversationId: conversation.id\n        }\n      });\n    } catch (err) {\n      notify(err.message || 'Unable to open chat.', 'error');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(SectionHeading, {\n      eyebrow: \"Browse\",\n      title: \"Seamless marketplace for every genre\",\n      description: \"Use filters, favorites, and quick actions to find the exact story you want to read next.\",\n      align: \"left\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BookFilters, {\n      filters: filters,\n      onChange: setFilters\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BookGrid, {\n      books: filteredBooks,\n      isLoading: booksStatus === 'loading',\n      favorites: favorites,\n      onToggleFavorite: isAuthenticated ? toggleFavorite : undefined,\n      onRequestExchange: handleRequest,\n      onChat: handleChat,\n      isOwner: isOwner\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(Browse, \"Tg8Wa2d2ZFf9VMRA0PnVlOLXx7M=\", false, function () {\n  return [useAppData, useAuth, useNotification, useNavigate];\n});\n_c = Browse;\nexport default Browse;\nvar _c;\n$RefreshReg$(_c, \"Browse\");","map":{"version":3,"names":["useMemo","useState","useNavigate","BookFilters","BookGrid","SectionHeading","useAppData","useAuth","exchangesApi","conversationsApi","useNotification","jsxDEV","_jsxDEV","Browse","_s","books","booksStatus","favorites","toggleFavorite","refreshBooks","refreshExchanges","isOwner","isAuthenticated","token","notify","navigate","filters","setFilters","search","genre","status","filteredBooks","filter","book","matchesSearch","title","toLowerCase","includes","author","matchesGenre","matchesStatus","requireAuth","replace","state","from","handleRequest","create","bookId","id","message","err","handleChat","conversation","otherUserId","ownerId","conversationId","children","eyebrow","description","align","fileName","_jsxFileName","lineNumber","columnNumber","onChange","isLoading","onToggleFavorite","undefined","onRequestExchange","onChat","_c","$RefreshReg$"],"sources":["C:/Users/dell/Desktop/pro/book-exchange-app/client/src/pages/Browse.jsx"],"sourcesContent":["import { useMemo, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport BookFilters from '../components/books/BookFilters';\r\nimport BookGrid from '../components/books/BookGrid';\r\nimport SectionHeading from '../components/common/SectionHeading';\r\nimport { useAppData } from '../context/AppDataContext';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { exchangesApi, conversationsApi } from '../services/api';\r\nimport { useNotification } from '../context/NotificationContext';\r\n\r\nconst Browse = () => {\r\n  const { books, booksStatus, favorites, toggleFavorite, refreshBooks, refreshExchanges, isOwner } =\r\n    useAppData();\r\n  const { isAuthenticated, token } = useAuth();\r\n  const { notify } = useNotification();\r\n  const navigate = useNavigate();\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    genre: 'All Genres',\r\n    status: 'Any Status',\r\n  });\r\n\r\n  const filteredBooks = useMemo(() => {\r\n    return books.filter((book) => {\r\n      const matchesSearch =\r\n        !filters.search ||\r\n        book.title.toLowerCase().includes(filters.search.toLowerCase()) ||\r\n        book.author.toLowerCase().includes(filters.search.toLowerCase());\r\n      const matchesGenre = filters.genre === 'All Genres' || book.genre === filters.genre;\r\n      const matchesStatus = filters.status === 'Any Status' || book.status === filters.status;\r\n      return matchesSearch && matchesGenre && matchesStatus;\r\n    });\r\n  }, [books, filters]);\r\n\r\n  const requireAuth = () => {\r\n    if (!isAuthenticated) {\r\n      notify('Please sign in to continue.', 'info');\r\n      navigate('/auth/signin', { replace: true, state: { from: '/browse' } });\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const handleRequest = async (book) => {\r\n    if (!requireAuth()) return;\r\n    try {\r\n      await exchangesApi.create(\r\n        { bookId: book.id, message: `I'd love to exchange for ${book.title}` },\r\n        token\r\n      );\r\n      notify('Exchange request sent.', 'success');\r\n      refreshBooks();\r\n      refreshExchanges();\r\n    } catch (err) {\r\n      notify(err.message || 'Unable to create request.', 'error');\r\n    }\r\n  };\r\n\r\n  const handleChat = async (book) => {\r\n    if (!requireAuth()) return;\r\n    try {\r\n      const conversation = await conversationsApi.create(\r\n        { otherUserId: book.ownerId, bookId: book.id },\r\n        token\r\n      );\r\n      navigate('/chat', { state: { conversationId: conversation.id } });\r\n    } catch (err) {\r\n      notify(err.message || 'Unable to open chat.', 'error');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SectionHeading\r\n        eyebrow=\"Browse\"\r\n        title=\"Seamless marketplace for every genre\"\r\n        description=\"Use filters, favorites, and quick actions to find the exact story you want to read next.\"\r\n        align=\"left\"\r\n      />\r\n      <BookFilters filters={filters} onChange={setFilters} />\r\n      <BookGrid\r\n        books={filteredBooks}\r\n        isLoading={booksStatus === 'loading'}\r\n        favorites={favorites}\r\n        onToggleFavorite={isAuthenticated ? toggleFavorite : undefined}\r\n        onRequestExchange={handleRequest}\r\n        onChat={handleChat}\r\n        isOwner={isOwner}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Browse;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}