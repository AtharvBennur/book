{"ast":null,"code":"import{useState}from'react';import{Loader2,Sparkles}from'lucide-react';import{aiApi}from'../../services/api';import{useAuth}from'../../context/AuthContext';import{useNotification}from'../../context/NotificationContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AIAssistant=()=>{const[question,setQuestion]=useState('');const[answer,setAnswer]=useState('');const[isLoading,setIsLoading]=useState(false);const{token}=useAuth();const{notify}=useNotification();const ask=async event=>{event.preventDefault();if(!question.trim())return;setIsLoading(true);try{const data=await aiApi.ask(question,token);setAnswer(data.answer||'No answer received, try again.');}catch(err){notify(err.message||'Assistant unavailable, please retry.','error');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"section\",{className:\"rounded-3xl border border-white/10 bg-white/5 p-6 shadow-lg shadow-black/20\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-emerald-300\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"h-4 w-4\"}),\"Ask the librarian\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-white/70\",children:\"Troubleshooting an exchange or looking for your next genre? Ask a question and get an instant answer.\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-4 space-y-3\",onSubmit:ask,children:[/*#__PURE__*/_jsx(\"textarea\",{value:question,onChange:event=>setQuestion(event.target.value),placeholder:\"e.g. \\u201CHow do I mark a swap as completed?\\u201D\",className:\"min-h-[90px] w-full rounded-2xl border border-white/10 bg-slate-900/30 px-4 py-3 text-sm text-white outline-none transition focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:isLoading,className:\"flex w-full items-center justify-center gap-2 rounded-full bg-gradient-to-r from-emerald-500 to-teal-400 px-4 py-2 text-sm font-semibold text-slate-900 shadow-lg shadow-emerald-500/30 disabled:cursor-not-allowed disabled:opacity-60\",children:[isLoading?/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 animate-spin\"}):/*#__PURE__*/_jsx(Sparkles,{className:\"h-4 w-4\"}),\"Ask AI\"]})]}),answer&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 rounded-2xl border border-white/10 bg-slate-950/50 p-4 text-sm text-white/80\",children:answer})]});};export default AIAssistant;","map":{"version":3,"names":["useState","Loader2","Sparkles","aiApi","useAuth","useNotification","jsx","_jsx","jsxs","_jsxs","AIAssistant","question","setQuestion","answer","setAnswer","isLoading","setIsLoading","token","notify","ask","event","preventDefault","trim","data","err","message","className","children","onSubmit","value","onChange","target","placeholder","type","disabled"],"sources":["C:/Users/dell/Desktop/pro/book-exchange-app/client/src/components/ai/AIAssistant.jsx"],"sourcesContent":["import { useState } from 'react';\r\nimport { Loader2, Sparkles } from 'lucide-react';\r\nimport { aiApi } from '../../services/api';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useNotification } from '../../context/NotificationContext';\r\n\r\nconst AIAssistant = () => {\r\n  const [question, setQuestion] = useState('');\r\n  const [answer, setAnswer] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const { token } = useAuth();\r\n  const { notify } = useNotification();\r\n\r\n  const ask = async (event) => {\r\n    event.preventDefault();\r\n    if (!question.trim()) return;\r\n    setIsLoading(true);\r\n    try {\r\n      const data = await aiApi.ask(question, token);\r\n      setAnswer(data.answer || 'No answer received, try again.');\r\n    } catch (err) {\r\n      notify(err.message || 'Assistant unavailable, please retry.', 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"rounded-3xl border border-white/10 bg-white/5 p-6 shadow-lg shadow-black/20\">\r\n      <div className=\"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-emerald-300\">\r\n        <Sparkles className=\"h-4 w-4\" />\r\n        Ask the librarian\r\n      </div>\r\n      <p className=\"mt-2 text-sm text-white/70\">\r\n        Troubleshooting an exchange or looking for your next genre? Ask a question and get an instant\r\n        answer.\r\n      </p>\r\n      <form className=\"mt-4 space-y-3\" onSubmit={ask}>\r\n        <textarea\r\n          value={question}\r\n          onChange={(event) => setQuestion(event.target.value)}\r\n          placeholder=\"e.g. “How do I mark a swap as completed?”\"\r\n          className=\"min-h-[90px] w-full rounded-2xl border border-white/10 bg-slate-900/30 px-4 py-3 text-sm text-white outline-none transition focus:border-emerald-400/60 focus:ring-2 focus:ring-emerald-400/20\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isLoading}\r\n          className=\"flex w-full items-center justify-center gap-2 rounded-full bg-gradient-to-r from-emerald-500 to-teal-400 px-4 py-2 text-sm font-semibold text-slate-900 shadow-lg shadow-emerald-500/30 disabled:cursor-not-allowed disabled:opacity-60\"\r\n        >\r\n          {isLoading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Sparkles className=\"h-4 w-4\" />}\r\n          Ask AI\r\n        </button>\r\n      </form>\r\n      {answer && (\r\n        <div className=\"mt-4 rounded-2xl border border-white/10 bg-slate-950/50 p-4 text-sm text-white/80\">\r\n          {answer}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default AIAssistant;\r\n\r\n"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,OAAO,CAAEC,QAAQ,KAAQ,cAAc,CAChD,OAASC,KAAK,KAAQ,oBAAoB,CAC1C,OAASC,OAAO,KAAQ,2BAA2B,CACnD,OAASC,eAAe,KAAQ,mCAAmC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpE,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACa,MAAM,CAAEC,SAAS,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACe,SAAS,CAAEC,YAAY,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAAEiB,KAAM,CAAC,CAAGb,OAAO,CAAC,CAAC,CAC3B,KAAM,CAAEc,MAAO,CAAC,CAAGb,eAAe,CAAC,CAAC,CAEpC,KAAM,CAAAc,GAAG,CAAG,KAAO,CAAAC,KAAK,EAAK,CAC3BA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtB,GAAI,CAACV,QAAQ,CAACW,IAAI,CAAC,CAAC,CAAE,OACtBN,YAAY,CAAC,IAAI,CAAC,CAClB,GAAI,CACF,KAAM,CAAAO,IAAI,CAAG,KAAM,CAAApB,KAAK,CAACgB,GAAG,CAACR,QAAQ,CAAEM,KAAK,CAAC,CAC7CH,SAAS,CAACS,IAAI,CAACV,MAAM,EAAI,gCAAgC,CAAC,CAC5D,CAAE,MAAOW,GAAG,CAAE,CACZN,MAAM,CAACM,GAAG,CAACC,OAAO,EAAI,sCAAsC,CAAE,OAAO,CAAC,CACxE,CAAC,OAAS,CACRT,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,mBACEP,KAAA,YAASiB,SAAS,CAAC,6EAA6E,CAAAC,QAAA,eAC9FlB,KAAA,QAAKiB,SAAS,CAAC,6EAA6E,CAAAC,QAAA,eAC1FpB,IAAA,CAACL,QAAQ,EAACwB,SAAS,CAAC,SAAS,CAAE,CAAC,oBAElC,EAAK,CAAC,cACNnB,IAAA,MAAGmB,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,uGAG1C,CAAG,CAAC,cACJlB,KAAA,SAAMiB,SAAS,CAAC,gBAAgB,CAACE,QAAQ,CAAET,GAAI,CAAAQ,QAAA,eAC7CpB,IAAA,aACEsB,KAAK,CAAElB,QAAS,CAChBmB,QAAQ,CAAGV,KAAK,EAAKR,WAAW,CAACQ,KAAK,CAACW,MAAM,CAACF,KAAK,CAAE,CACrDG,WAAW,CAAC,qDAA2C,CACvDN,SAAS,CAAC,gMAAgM,CAC3M,CAAC,cACFjB,KAAA,WACEwB,IAAI,CAAC,QAAQ,CACbC,QAAQ,CAAEnB,SAAU,CACpBW,SAAS,CAAC,yOAAyO,CAAAC,QAAA,EAElPZ,SAAS,cAAGR,IAAA,CAACN,OAAO,EAACyB,SAAS,CAAC,sBAAsB,CAAE,CAAC,cAAGnB,IAAA,CAACL,QAAQ,EAACwB,SAAS,CAAC,SAAS,CAAE,CAAC,CAAC,QAE/F,EAAQ,CAAC,EACL,CAAC,CACNb,MAAM,eACLN,IAAA,QAAKmB,SAAS,CAAC,mFAAmF,CAAAC,QAAA,CAC/Fd,MAAM,CACJ,CACN,EACM,CAAC,CAEd,CAAC,CAED,cAAe,CAAAH,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}