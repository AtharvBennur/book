{"ast":null,"code":"import{useNavigate}from'react-router-dom';import{Heart}from'lucide-react';import BookGrid from'../components/books/BookGrid';import SectionHeading from'../components/common/SectionHeading';import EmptyState from'../components/common/EmptyState';import{useAppData}from'../context/AppDataContext';import{useAuth}from'../context/AuthContext';import{exchangesApi,conversationsApi}from'../services/api';import{useNotification}from'../context/NotificationContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Favorites=()=>{const{books,favorites,toggleFavorite,isOwner,refreshBooks,refreshExchanges}=useAppData();const{token}=useAuth();const{notify}=useNotification();const navigate=useNavigate();const favoriteBooks=books.filter(book=>favorites.includes(book.id));if(!favorites.length){return/*#__PURE__*/_jsx(EmptyState,{title:\"No favorites yet\",description:\"Tap the heart on any book to keep it in your shortlist.\",icon:/*#__PURE__*/_jsx(Heart,{className:\"h-10 w-10\"}),action:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/browse'),className:\"rounded-full border border-white/20 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em]\",children:\"Browse books\"})});}const handleRequest=async book=>{try{await exchangesApi.create({bookId:book.id,message:\"Checking in about \".concat(book.title)},token);notify('Exchange request sent.','success');refreshBooks();refreshExchanges();}catch(err){notify(err.message||'Unable to request exchange.','error');}};const handleChat=async book=>{try{const conversation=await conversationsApi.create({otherUserId:book.ownerId,bookId:book.id},token);navigate('/chat',{state:{conversationId:conversation.id}});}catch(err){notify(err.message||'Unable to open chat.','error');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(SectionHeading,{eyebrow:\"Saved list\",title:\"Books you\\u2019re tracking\",description:\"You\\u2019ll get notified when statuses change or owners reply.\",align:\"left\"}),/*#__PURE__*/_jsx(BookGrid,{books:favoriteBooks,favorites:favorites,onToggleFavorite:toggleFavorite,onRequestExchange:handleRequest,onChat:handleChat,isOwner:isOwner})]});};export default Favorites;","map":{"version":3,"names":["useNavigate","Heart","BookGrid","SectionHeading","EmptyState","useAppData","useAuth","exchangesApi","conversationsApi","useNotification","jsx","_jsx","jsxs","_jsxs","Favorites","books","favorites","toggleFavorite","isOwner","refreshBooks","refreshExchanges","token","notify","navigate","favoriteBooks","filter","book","includes","id","length","title","description","icon","className","action","onClick","children","handleRequest","create","bookId","message","concat","err","handleChat","conversation","otherUserId","ownerId","state","conversationId","eyebrow","align","onToggleFavorite","onRequestExchange","onChat"],"sources":["C:/Users/dell/Desktop/pro/book-exchange-app/client/src/pages/Favorites.jsx"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\r\nimport { Heart } from 'lucide-react';\r\nimport BookGrid from '../components/books/BookGrid';\r\nimport SectionHeading from '../components/common/SectionHeading';\r\nimport EmptyState from '../components/common/EmptyState';\r\nimport { useAppData } from '../context/AppDataContext';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { exchangesApi, conversationsApi } from '../services/api';\r\nimport { useNotification } from '../context/NotificationContext';\r\n\r\nconst Favorites = () => {\r\n  const { books, favorites, toggleFavorite, isOwner, refreshBooks, refreshExchanges } = useAppData();\r\n  const { token } = useAuth();\r\n  const { notify } = useNotification();\r\n  const navigate = useNavigate();\r\n  const favoriteBooks = books.filter((book) => favorites.includes(book.id));\r\n\r\n  if (!favorites.length) {\r\n    return (\r\n      <EmptyState\r\n        title=\"No favorites yet\"\r\n        description=\"Tap the heart on any book to keep it in your shortlist.\"\r\n        icon={<Heart className=\"h-10 w-10\" />}\r\n        action={\r\n          <button\r\n            onClick={() => navigate('/browse')}\r\n            className=\"rounded-full border border-white/20 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em]\"\r\n          >\r\n            Browse books\r\n          </button>\r\n        }\r\n      />\r\n    );\r\n  }\r\n\r\n  const handleRequest = async (book) => {\r\n    try {\r\n      await exchangesApi.create(\r\n        { bookId: book.id, message: `Checking in about ${book.title}` },\r\n        token\r\n      );\r\n      notify('Exchange request sent.', 'success');\r\n      refreshBooks();\r\n      refreshExchanges();\r\n    } catch (err) {\r\n      notify(err.message || 'Unable to request exchange.', 'error');\r\n    }\r\n  };\r\n\r\n  const handleChat = async (book) => {\r\n    try {\r\n      const conversation = await conversationsApi.create(\r\n        { otherUserId: book.ownerId, bookId: book.id },\r\n        token\r\n      );\r\n      navigate('/chat', { state: { conversationId: conversation.id } });\r\n    } catch (err) {\r\n      notify(err.message || 'Unable to open chat.', 'error');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SectionHeading\r\n        eyebrow=\"Saved list\"\r\n        title=\"Books you’re tracking\"\r\n        description=\"You’ll get notified when statuses change or owners reply.\"\r\n        align=\"left\"\r\n      />\r\n      <BookGrid\r\n        books={favoriteBooks}\r\n        favorites={favorites}\r\n        onToggleFavorite={toggleFavorite}\r\n        onRequestExchange={handleRequest}\r\n        onChat={handleChat}\r\n        isOwner={isOwner}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Favorites;\r\n\r\n"],"mappings":"AAAA,OAASA,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,KAAK,KAAQ,cAAc,CACpC,MAAO,CAAAC,QAAQ,KAAM,8BAA8B,CACnD,MAAO,CAAAC,cAAc,KAAM,qCAAqC,CAChE,MAAO,CAAAC,UAAU,KAAM,iCAAiC,CACxD,OAASC,UAAU,KAAQ,2BAA2B,CACtD,OAASC,OAAO,KAAQ,wBAAwB,CAChD,OAASC,YAAY,CAAEC,gBAAgB,KAAQ,iBAAiB,CAChE,OAASC,eAAe,KAAQ,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjE,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAAEC,KAAK,CAAEC,SAAS,CAAEC,cAAc,CAAEC,OAAO,CAAEC,YAAY,CAAEC,gBAAiB,CAAC,CAAGf,UAAU,CAAC,CAAC,CAClG,KAAM,CAAEgB,KAAM,CAAC,CAAGf,OAAO,CAAC,CAAC,CAC3B,KAAM,CAAEgB,MAAO,CAAC,CAAGb,eAAe,CAAC,CAAC,CACpC,KAAM,CAAAc,QAAQ,CAAGvB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAwB,aAAa,CAAGT,KAAK,CAACU,MAAM,CAAEC,IAAI,EAAKV,SAAS,CAACW,QAAQ,CAACD,IAAI,CAACE,EAAE,CAAC,CAAC,CAEzE,GAAI,CAACZ,SAAS,CAACa,MAAM,CAAE,CACrB,mBACElB,IAAA,CAACP,UAAU,EACT0B,KAAK,CAAC,kBAAkB,CACxBC,WAAW,CAAC,yDAAyD,CACrEC,IAAI,cAAErB,IAAA,CAACV,KAAK,EAACgC,SAAS,CAAC,WAAW,CAAE,CAAE,CACtCC,MAAM,cACJvB,IAAA,WACEwB,OAAO,CAAEA,CAAA,GAAMZ,QAAQ,CAAC,SAAS,CAAE,CACnCU,SAAS,CAAC,gGAAgG,CAAAG,QAAA,CAC3G,cAED,CAAQ,CACT,CACF,CAAC,CAEN,CAEA,KAAM,CAAAC,aAAa,CAAG,KAAO,CAAAX,IAAI,EAAK,CACpC,GAAI,CACF,KAAM,CAAAnB,YAAY,CAAC+B,MAAM,CACvB,CAAEC,MAAM,CAAEb,IAAI,CAACE,EAAE,CAAEY,OAAO,sBAAAC,MAAA,CAAuBf,IAAI,CAACI,KAAK,CAAG,CAAC,CAC/DT,KACF,CAAC,CACDC,MAAM,CAAC,wBAAwB,CAAE,SAAS,CAAC,CAC3CH,YAAY,CAAC,CAAC,CACdC,gBAAgB,CAAC,CAAC,CACpB,CAAE,MAAOsB,GAAG,CAAE,CACZpB,MAAM,CAACoB,GAAG,CAACF,OAAO,EAAI,6BAA6B,CAAE,OAAO,CAAC,CAC/D,CACF,CAAC,CAED,KAAM,CAAAG,UAAU,CAAG,KAAO,CAAAjB,IAAI,EAAK,CACjC,GAAI,CACF,KAAM,CAAAkB,YAAY,CAAG,KAAM,CAAApC,gBAAgB,CAAC8B,MAAM,CAChD,CAAEO,WAAW,CAAEnB,IAAI,CAACoB,OAAO,CAAEP,MAAM,CAAEb,IAAI,CAACE,EAAG,CAAC,CAC9CP,KACF,CAAC,CACDE,QAAQ,CAAC,OAAO,CAAE,CAAEwB,KAAK,CAAE,CAAEC,cAAc,CAAEJ,YAAY,CAAChB,EAAG,CAAE,CAAC,CAAC,CACnE,CAAE,MAAOc,GAAG,CAAE,CACZpB,MAAM,CAACoB,GAAG,CAACF,OAAO,EAAI,sBAAsB,CAAE,OAAO,CAAC,CACxD,CACF,CAAC,CAED,mBACE3B,KAAA,QAAAuB,QAAA,eACEzB,IAAA,CAACR,cAAc,EACb8C,OAAO,CAAC,YAAY,CACpBnB,KAAK,CAAC,4BAAuB,CAC7BC,WAAW,CAAC,gEAA2D,CACvEmB,KAAK,CAAC,MAAM,CACb,CAAC,cACFvC,IAAA,CAACT,QAAQ,EACPa,KAAK,CAAES,aAAc,CACrBR,SAAS,CAAEA,SAAU,CACrBmC,gBAAgB,CAAElC,cAAe,CACjCmC,iBAAiB,CAAEf,aAAc,CACjCgB,MAAM,CAAEV,UAAW,CACnBzB,OAAO,CAAEA,OAAQ,CAClB,CAAC,EACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAAJ,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}