{"ast":null,"code":"import _objectSpread from\"C:/Users/dell/Desktop/pro/book-exchange-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"C:/Users/dell/Desktop/pro/book-exchange-app/client/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"method\",\"body\",\"token\",\"headers\"];const API_BASE='';const buildUrl=path=>{if(!path)return API_BASE||'';if(path.startsWith('http'))return path;return\"\".concat(API_BASE).concat(path);};const isFormData=payload=>typeof FormData!=='undefined'&&payload instanceof FormData;export async function request(path){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const{method='GET',body,token,headers={}}=options,rest=_objectWithoutProperties(options,_excluded);const resolvedHeaders=_objectSpread(_objectSpread({Accept:'application/json'},!isFormData(body)&&body?{'Content-Type':'application/json'}:{}),headers);if(token){resolvedHeaders.Authorization=\"Bearer \".concat(token);}const response=await fetch(buildUrl(path),_objectSpread({method,body:body&&!isFormData(body)?JSON.stringify(body):body,headers:resolvedHeaders},rest));const text=await response.text();let data=null;if(text){try{data=JSON.parse(text);}catch(err){data=text;}}if(!response.ok){var _data;const error=new Error(((_data=data)===null||_data===void 0?void 0:_data.error)||'Request failed');error.status=response.status;error.data=data;throw error;}return data;}export const authApi={me:token=>request('/api/me',{token}),login:credentials=>request('/api/login',{method:'POST',body:credentials}),signup:payload=>request('/api/signup',{method:'POST',body:payload}),updateProfile:(userId,payload,token)=>request(\"/api/users/\".concat(userId),{method:'PUT',body:payload,token})};export const booksApi={list:()=>request('/api/books'),create:(payload,token)=>request('/api/books',{method:'POST',body:payload,token}),update:(bookId,payload,token)=>request(\"/api/books/\".concat(bookId),{method:'PUT',body:payload,token}),remove:(bookId,token)=>request(\"/api/books/\".concat(bookId),{method:'DELETE',token})};export const favoritesApi={list:token=>request('/api/users/favorites',{token}),toggle:(bookId,token)=>request('/api/users/favorite',{method:'POST',body:{bookId},token})};export const exchangesApi={list:token=>request('/api/exchanges',{token}),create:(payload,token)=>request('/api/exchanges',{method:'POST',body:payload,token}),accept:(exchangeId,token)=>request(\"/api/exchanges/\".concat(exchangeId,\"/accept\"),{method:'PUT',token}),decline:(exchangeId,token)=>request(\"/api/exchanges/\".concat(exchangeId,\"/decline\"),{method:'PUT',token})};export const conversationsApi={list:token=>request('/api/conversations',{token}),create:(payload,token)=>request('/api/conversations',{method:'POST',body:payload,token}),messages:(conversationId,token)=>request(\"/api/conversations/\".concat(conversationId,\"/messages\"),{token}),sendMessage:(conversationId,payload,token)=>request(\"/api/conversations/\".concat(conversationId,\"/messages\"),{method:'POST',body:payload,token}),markRead:(conversationId,token)=>request(\"/api/conversations/\".concat(conversationId,\"/read\"),{method:'PUT',token})};export const aiApi={ask:(question,token)=>request('/api/ai-help',{method:'POST',body:{question},token})};","map":{"version":3,"names":["API_BASE","buildUrl","path","startsWith","concat","isFormData","payload","FormData","request","options","arguments","length","undefined","method","body","token","headers","rest","_objectWithoutProperties","_excluded","resolvedHeaders","_objectSpread","Accept","Authorization","response","fetch","JSON","stringify","text","data","parse","err","ok","_data","error","Error","status","authApi","me","login","credentials","signup","updateProfile","userId","booksApi","list","create","update","bookId","remove","favoritesApi","toggle","exchangesApi","accept","exchangeId","decline","conversationsApi","messages","conversationId","sendMessage","markRead","aiApi","ask","question"],"sources":["C:/Users/dell/Desktop/pro/book-exchange-app/client/src/services/api.js"],"sourcesContent":["const API_BASE = '';\r\n\r\nconst buildUrl = (path) => {\r\n  if (!path) return API_BASE || '';\r\n  if (path.startsWith('http')) return path;\r\n  return `${API_BASE}${path}`;\r\n};\r\n\r\nconst isFormData = (payload) => typeof FormData !== 'undefined' && payload instanceof FormData;\r\n\r\nexport async function request(path, options = {}) {\r\n  const { method = 'GET', body, token, headers = {}, ...rest } = options;\r\n  const resolvedHeaders = {\r\n    Accept: 'application/json',\r\n    ...(!isFormData(body) && body ? { 'Content-Type': 'application/json' } : {}),\r\n    ...headers,\r\n  };\r\n\r\n  if (token) {\r\n    resolvedHeaders.Authorization = `Bearer ${token}`;\r\n  }\r\n\r\n  const response = await fetch(buildUrl(path), {\r\n    method,\r\n    body: body && !isFormData(body) ? JSON.stringify(body) : body,\r\n    headers: resolvedHeaders,\r\n    ...rest,\r\n  });\r\n\r\n  const text = await response.text();\r\n  let data = null;\r\n  if (text) {\r\n    try {\r\n      data = JSON.parse(text);\r\n    } catch (err) {\r\n      data = text;\r\n    }\r\n  }\r\n\r\n  if (!response.ok) {\r\n    const error = new Error(data?.error || 'Request failed');\r\n    error.status = response.status;\r\n    error.data = data;\r\n    throw error;\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport const authApi = {\r\n  me: (token) => request('/api/me', { token }),\r\n  login: (credentials) => request('/api/login', { method: 'POST', body: credentials }),\r\n  signup: (payload) => request('/api/signup', { method: 'POST', body: payload }),\r\n  updateProfile: (userId, payload, token) =>\r\n    request(`/api/users/${userId}`, { method: 'PUT', body: payload, token }),\r\n};\r\n\r\nexport const booksApi = {\r\n  list: () => request('/api/books'),\r\n  create: (payload, token) => request('/api/books', { method: 'POST', body: payload, token }),\r\n  update: (bookId, payload, token) =>\r\n    request(`/api/books/${bookId}`, { method: 'PUT', body: payload, token }),\r\n  remove: (bookId, token) =>\r\n    request(`/api/books/${bookId}`, { method: 'DELETE', token }),\r\n};\r\n\r\nexport const favoritesApi = {\r\n  list: (token) => request('/api/users/favorites', { token }),\r\n  toggle: (bookId, token) =>\r\n    request('/api/users/favorite', {\r\n      method: 'POST',\r\n      body: { bookId },\r\n      token,\r\n    }),\r\n};\r\n\r\nexport const exchangesApi = {\r\n  list: (token) => request('/api/exchanges', { token }),\r\n  create: (payload, token) =>\r\n    request('/api/exchanges', { method: 'POST', body: payload, token }),\r\n  accept: (exchangeId, token) =>\r\n    request(`/api/exchanges/${exchangeId}/accept`, { method: 'PUT', token }),\r\n  decline: (exchangeId, token) =>\r\n    request(`/api/exchanges/${exchangeId}/decline`, { method: 'PUT', token }),\r\n};\r\n\r\nexport const conversationsApi = {\r\n  list: (token) => request('/api/conversations', { token }),\r\n  create: (payload, token) =>\r\n    request('/api/conversations', { method: 'POST', body: payload, token }),\r\n  messages: (conversationId, token) =>\r\n    request(`/api/conversations/${conversationId}/messages`, { token }),\r\n  sendMessage: (conversationId, payload, token) =>\r\n    request(`/api/conversations/${conversationId}/messages`, {\r\n      method: 'POST',\r\n      body: payload,\r\n      token,\r\n    }),\r\n  markRead: (conversationId, token) =>\r\n    request(`/api/conversations/${conversationId}/read`, { method: 'PUT', token }),\r\n};\r\n\r\nexport const aiApi = {\r\n  ask: (question, token) =>\r\n    request('/api/ai-help', {\r\n      method: 'POST',\r\n      body: { question },\r\n      token,\r\n    }),\r\n};\r\n\r\n"],"mappings":"uVAAA,KAAM,CAAAA,QAAQ,CAAG,EAAE,CAEnB,KAAM,CAAAC,QAAQ,CAAIC,IAAI,EAAK,CACzB,GAAI,CAACA,IAAI,CAAE,MAAO,CAAAF,QAAQ,EAAI,EAAE,CAChC,GAAIE,IAAI,CAACC,UAAU,CAAC,MAAM,CAAC,CAAE,MAAO,CAAAD,IAAI,CACxC,SAAAE,MAAA,CAAUJ,QAAQ,EAAAI,MAAA,CAAGF,IAAI,EAC3B,CAAC,CAED,KAAM,CAAAG,UAAU,CAAIC,OAAO,EAAK,MAAO,CAAAC,QAAQ,GAAK,WAAW,EAAID,OAAO,WAAY,CAAAC,QAAQ,CAE9F,MAAO,eAAe,CAAAC,OAAOA,CAACN,IAAI,CAAgB,IAAd,CAAAO,OAAO,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CAC9C,KAAM,CAAEG,MAAM,CAAG,KAAK,CAAEC,IAAI,CAAEC,KAAK,CAAEC,OAAO,CAAG,CAAC,CAAW,CAAC,CAAGP,OAAO,CAAhBQ,IAAI,CAAAC,wBAAA,CAAKT,OAAO,CAAAU,SAAA,EACtE,KAAM,CAAAC,eAAe,CAAAC,aAAA,CAAAA,aAAA,EACnBC,MAAM,CAAE,kBAAkB,EACtB,CAACjB,UAAU,CAACS,IAAI,CAAC,EAAIA,IAAI,CAAG,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAAG,CAAC,CAAC,EACxEE,OAAO,CACX,CAED,GAAID,KAAK,CAAE,CACTK,eAAe,CAACG,aAAa,WAAAnB,MAAA,CAAaW,KAAK,CAAE,CACnD,CAEA,KAAM,CAAAS,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACxB,QAAQ,CAACC,IAAI,CAAC,CAAAmB,aAAA,EACzCR,MAAM,CACNC,IAAI,CAAEA,IAAI,EAAI,CAACT,UAAU,CAACS,IAAI,CAAC,CAAGY,IAAI,CAACC,SAAS,CAACb,IAAI,CAAC,CAAGA,IAAI,CAC7DE,OAAO,CAAEI,eAAe,EACrBH,IAAI,CACR,CAAC,CAEF,KAAM,CAAAW,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACI,IAAI,CAAC,CAAC,CAClC,GAAI,CAAAC,IAAI,CAAG,IAAI,CACf,GAAID,IAAI,CAAE,CACR,GAAI,CACFC,IAAI,CAAGH,IAAI,CAACI,KAAK,CAACF,IAAI,CAAC,CACzB,CAAE,MAAOG,GAAG,CAAE,CACZF,IAAI,CAAGD,IAAI,CACb,CACF,CAEA,GAAI,CAACJ,QAAQ,CAACQ,EAAE,CAAE,KAAAC,KAAA,CAChB,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAC,KAAK,CAAC,EAAAF,KAAA,CAAAJ,IAAI,UAAAI,KAAA,iBAAJA,KAAA,CAAMC,KAAK,GAAI,gBAAgB,CAAC,CACxDA,KAAK,CAACE,MAAM,CAAGZ,QAAQ,CAACY,MAAM,CAC9BF,KAAK,CAACL,IAAI,CAAGA,IAAI,CACjB,KAAM,CAAAK,KAAK,CACb,CAEA,MAAO,CAAAL,IAAI,CACb,CAEA,MAAO,MAAM,CAAAQ,OAAO,CAAG,CACrBC,EAAE,CAAGvB,KAAK,EAAKP,OAAO,CAAC,SAAS,CAAE,CAAEO,KAAM,CAAC,CAAC,CAC5CwB,KAAK,CAAGC,WAAW,EAAKhC,OAAO,CAAC,YAAY,CAAE,CAAEK,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAE0B,WAAY,CAAC,CAAC,CACpFC,MAAM,CAAGnC,OAAO,EAAKE,OAAO,CAAC,aAAa,CAAE,CAAEK,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAER,OAAQ,CAAC,CAAC,CAC9EoC,aAAa,CAAEA,CAACC,MAAM,CAAErC,OAAO,CAAES,KAAK,GACpCP,OAAO,eAAAJ,MAAA,CAAeuC,MAAM,EAAI,CAAE9B,MAAM,CAAE,KAAK,CAAEC,IAAI,CAAER,OAAO,CAAES,KAAM,CAAC,CAC3E,CAAC,CAED,MAAO,MAAM,CAAA6B,QAAQ,CAAG,CACtBC,IAAI,CAAEA,CAAA,GAAMrC,OAAO,CAAC,YAAY,CAAC,CACjCsC,MAAM,CAAEA,CAACxC,OAAO,CAAES,KAAK,GAAKP,OAAO,CAAC,YAAY,CAAE,CAAEK,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAER,OAAO,CAAES,KAAM,CAAC,CAAC,CAC3FgC,MAAM,CAAEA,CAACC,MAAM,CAAE1C,OAAO,CAAES,KAAK,GAC7BP,OAAO,eAAAJ,MAAA,CAAe4C,MAAM,EAAI,CAAEnC,MAAM,CAAE,KAAK,CAAEC,IAAI,CAAER,OAAO,CAAES,KAAM,CAAC,CAAC,CAC1EkC,MAAM,CAAEA,CAACD,MAAM,CAAEjC,KAAK,GACpBP,OAAO,eAAAJ,MAAA,CAAe4C,MAAM,EAAI,CAAEnC,MAAM,CAAE,QAAQ,CAAEE,KAAM,CAAC,CAC/D,CAAC,CAED,MAAO,MAAM,CAAAmC,YAAY,CAAG,CAC1BL,IAAI,CAAG9B,KAAK,EAAKP,OAAO,CAAC,sBAAsB,CAAE,CAAEO,KAAM,CAAC,CAAC,CAC3DoC,MAAM,CAAEA,CAACH,MAAM,CAAEjC,KAAK,GACpBP,OAAO,CAAC,qBAAqB,CAAE,CAC7BK,MAAM,CAAE,MAAM,CACdC,IAAI,CAAE,CAAEkC,MAAO,CAAC,CAChBjC,KACF,CAAC,CACL,CAAC,CAED,MAAO,MAAM,CAAAqC,YAAY,CAAG,CAC1BP,IAAI,CAAG9B,KAAK,EAAKP,OAAO,CAAC,gBAAgB,CAAE,CAAEO,KAAM,CAAC,CAAC,CACrD+B,MAAM,CAAEA,CAACxC,OAAO,CAAES,KAAK,GACrBP,OAAO,CAAC,gBAAgB,CAAE,CAAEK,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAER,OAAO,CAAES,KAAM,CAAC,CAAC,CACrEsC,MAAM,CAAEA,CAACC,UAAU,CAAEvC,KAAK,GACxBP,OAAO,mBAAAJ,MAAA,CAAmBkD,UAAU,YAAW,CAAEzC,MAAM,CAAE,KAAK,CAAEE,KAAM,CAAC,CAAC,CAC1EwC,OAAO,CAAEA,CAACD,UAAU,CAAEvC,KAAK,GACzBP,OAAO,mBAAAJ,MAAA,CAAmBkD,UAAU,aAAY,CAAEzC,MAAM,CAAE,KAAK,CAAEE,KAAM,CAAC,CAC5E,CAAC,CAED,MAAO,MAAM,CAAAyC,gBAAgB,CAAG,CAC9BX,IAAI,CAAG9B,KAAK,EAAKP,OAAO,CAAC,oBAAoB,CAAE,CAAEO,KAAM,CAAC,CAAC,CACzD+B,MAAM,CAAEA,CAACxC,OAAO,CAAES,KAAK,GACrBP,OAAO,CAAC,oBAAoB,CAAE,CAAEK,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAER,OAAO,CAAES,KAAM,CAAC,CAAC,CACzE0C,QAAQ,CAAEA,CAACC,cAAc,CAAE3C,KAAK,GAC9BP,OAAO,uBAAAJ,MAAA,CAAuBsD,cAAc,cAAa,CAAE3C,KAAM,CAAC,CAAC,CACrE4C,WAAW,CAAEA,CAACD,cAAc,CAAEpD,OAAO,CAAES,KAAK,GAC1CP,OAAO,uBAAAJ,MAAA,CAAuBsD,cAAc,cAAa,CACvD7C,MAAM,CAAE,MAAM,CACdC,IAAI,CAAER,OAAO,CACbS,KACF,CAAC,CAAC,CACJ6C,QAAQ,CAAEA,CAACF,cAAc,CAAE3C,KAAK,GAC9BP,OAAO,uBAAAJ,MAAA,CAAuBsD,cAAc,UAAS,CAAE7C,MAAM,CAAE,KAAK,CAAEE,KAAM,CAAC,CACjF,CAAC,CAED,MAAO,MAAM,CAAA8C,KAAK,CAAG,CACnBC,GAAG,CAAEA,CAACC,QAAQ,CAAEhD,KAAK,GACnBP,OAAO,CAAC,cAAc,CAAE,CACtBK,MAAM,CAAE,MAAM,CACdC,IAAI,CAAE,CAAEiD,QAAS,CAAC,CAClBhD,KACF,CAAC,CACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}